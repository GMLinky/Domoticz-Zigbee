"use strict";(self.webpackChunkz4d_plugin=self.webpackChunkz4d_plugin||[]).push([[521],{16521:(w,g,a)=>{a.r(g),a.d(g,{SettingsModule:()=>V});var f=a(93887),p=a(99062),v=a(38117),t=a(54438),_=a(88652),E=a(3366),r=a(89417),h=a(45794),b=a(38852),l=a(19664),m=a(60177),k=a(97013);function j(e,o){if(1&e&&(t.j41(0,"div",4),t.EFF(1,"\n    "),t.nrm(2,"label",5),t.EFF(3,"\n    "),t.j41(4,"div",6),t.EFF(5,"\n      "),t.nrm(6,"input",7),t.EFF(7,"\n    "),t.k0s(),t.EFF(8,"\n  "),t.k0s()),2&e){const n=t.XpG(2);t.R7$(2),t.FS9("translate",n.setting.Name)}}function S(e,o){if(1&e&&(t.j41(0,"div",4),t.EFF(1,"\n    "),t.nrm(2,"label",5),t.EFF(3,"\n    "),t.j41(4,"div",6),t.EFF(5,"\n      "),t.nrm(6,"input",7),t.EFF(7,"\n    "),t.k0s(),t.EFF(8,"\n  "),t.k0s()),2&e){const n=t.XpG(2);t.R7$(2),t.FS9("translate",n.setting.Name)}}function T(e,o){if(1&e&&(t.j41(0,"div",4),t.EFF(1,"\n    "),t.nrm(2,"label",5),t.EFF(3,"\n    "),t.j41(4,"div",6),t.EFF(5,"\n      "),t.nrm(6,"input",8),t.EFF(7,"\n    "),t.k0s(),t.EFF(8,"\n  "),t.k0s()),2&e){const n=t.XpG(2);t.R7$(2),t.FS9("translate",n.setting.Name)}}function C(e,o){if(1&e&&(t.j41(0,"div",4),t.EFF(1,"\n    "),t.nrm(2,"label",5),t.EFF(3,"\n    "),t.j41(4,"div",6),t.EFF(5,"\n      "),t.nrm(6,"input",9),t.EFF(7,"\n    "),t.k0s(),t.EFF(8,"\n  "),t.k0s()),2&e){const n=t.XpG(2);t.R7$(2),t.FS9("translate",n.setting.Name)}}function G(e,o){if(1&e&&(t.j41(0,"div",4),t.EFF(1,"\n    "),t.nrm(2,"label",5),t.EFF(3,"\n    "),t.j41(4,"div",6),t.EFF(5,"\n      "),t.j41(6,"ng-select",10),t.EFF(7,"\n      "),t.k0s(),t.EFF(8,"\n    "),t.k0s(),t.EFF(9,"\n  "),t.k0s()),2&e){const n=t.XpG(2);t.R7$(2),t.FS9("translate",n.setting.Name),t.R7$(4),t.Y8G("items",n.list)("compareWith",n.compareNumeric)("closeOnSelect",!0)}}function N(e,o){if(1&e&&(t.j41(0,"div",11),t.EFF(1,"\n    "),t.nrm(2,"input",12),t.EFF(3,"\n    "),t.nrm(4,"label",13),t.EFF(5,"\n  "),t.k0s()),2&e){const n=t.XpG(2);t.R7$(2),t.FS9("id",n.setting.Name),t.R7$(2),t.FS9("for",n.setting.Name),t.FS9("translate",n.setting.Name)}}function R(e,o){if(1&e&&(t.j41(0,"div",1),t.EFF(1,"\n  "),t.DNE(2,j,9,1,"div",2),t.EFF(3,"\n  "),t.DNE(4,S,9,1,"div",2),t.EFF(5,"\n  "),t.DNE(6,T,9,1,"div",2),t.EFF(7,"\n  "),t.DNE(8,C,9,1,"div",2),t.EFF(9,"\n  "),t.DNE(10,G,10,4,"div",2),t.EFF(11,"\n  "),t.DNE(12,N,6,3,"div",3),t.EFF(13,"\n"),t.k0s()),2&e){const n=t.XpG();t.Y8G("formGroupName",n.setting.Name),t.R7$(2),t.Y8G("ngIf","str"===n.setting.DataType),t.R7$(2),t.Y8G("ngIf","path"===n.setting.DataType),t.R7$(2),t.Y8G("ngIf","int"===n.setting.DataType),t.R7$(2),t.Y8G("ngIf","hex"===n.setting.DataType),t.R7$(2),t.Y8G("ngIf","list"===n.setting.DataType),t.R7$(2),t.Y8G("ngIf","bool"===n.setting.DataType)}}let y=(()=>{class e{formBuilder;fgd;translate;setting;advanced;list=[];constructor(n,i,s){this.formBuilder=n,this.fgd=i,this.translate=s}ngOnChanges(n){let i;if(n.setting&&n.setting.currentValue){this.setting=n.setting.currentValue,"hex"===this.setting.DataType?i=this.formBuilder.group({current:["",r.k0.compose([r.k0.required,r.k0.pattern("^[0-9A-Fa-f]+")])]}):"bool"===this.setting.DataType?i=this.formBuilder.group({current:[]}):"list"===this.setting.DataType?(i=this.formBuilder.group({current:[null,r.k0.required]}),this.list=[],this.setting.list.forEach(c=>{const F=Object.keys(c)[0],u=Object.values(c)[0];this.list.push({label:F,value:u})})):i=this.formBuilder.group({current:["",r.k0.required]}),this.fgd.form.addControl(this.setting.Name,i);const s=""!==this.setting.current_value?this.setting.current_value:this.setting.default_value;this.fgd.form.get(this.setting.Name).get("current").patchValue(s)}}compareNumeric(n,i){return isNaN(n.value)?n.value===i:n.value===Number(i)}static \u0275fac=function(i){return new(i||e)(t.rXU(r.ok),t.rXU(r.j4),t.rXU(l.c$))};static \u0275cmp=t.VBU({type:e,selectors:[["app-setting"]],inputs:{setting:"setting",advanced:"advanced"},features:[t.Jv_([],[{provide:r.ZU,useExisting:r.j4}]),t.OA$],decls:2,vars:1,consts:[[3,"formGroupName",4,"ngIf"],[3,"formGroupName"],["class","form-group row mt-2",4,"ngIf"],["class","form-check form-check-inline mt-2",4,"ngIf"],[1,"form-group","row","mt-2"],["for","current",1,"col-sm-6","col-form-label",3,"translate"],[1,"col-sm"],["type","text","formControlName","current",1,"w-100","form-control"],["type","number","formControlName","current",1,"w-50","form-control"],["type","text","formControlName","current",1,"w-50","form-control"],["bindLabel","label","bindValue","value","formControlName","current",3,"items","compareWith","closeOnSelect"],[1,"form-check","form-check-inline","mt-2"],["formControlName","current","type","checkbox",1,"form-check-input",3,"id"],[1,"form-check-label",3,"for","translate"]],template:function(i,s){1&i&&(t.DNE(0,R,14,7,"div",0),t.EFF(1,"\n")),2&i&&t.Y8G("ngIf",!1===s.setting.Advanced||s.advanced===s.setting.Advanced)},dependencies:[m.bT,r.me,r.Q0,r.Zm,r.BC,r.cb,r.JD,r.$R,k.vr,l.Mm],styles:["was-validated[_ngcontent-%COMP%]   .custom-control-input[_ngcontent-%COMP%]:valid ~ .custom-control-label[_ngcontent-%COMP%], .custom-control-input.is-valid[_ngcontent-%COMP%] ~ .custom-control-label[_ngcontent-%COMP%]{color:#000}"]})}return e})();const d=["contentRestart"];function $(e,o){if(1&e&&(t.qex(0),t.EFF(1,"\n              "),t.nrm(2,"app-setting",25),t.EFF(3,"\n            "),t.bVm()),2&e){const n=o.$implicit,i=t.XpG(4);t.R7$(2),t.Y8G("setting",n)("advanced",i.advanced)}}function x(e,o){if(1&e&&(t.j41(0,"div",21),t.EFF(1,"\n        "),t.nrm(2,"div",22),t.EFF(3,"\n        "),t.j41(4,"div",23),t.EFF(5,"\n          "),t.nrm(6,"p",17),t.EFF(7,"\n          "),t.j41(8,"div",24),t.EFF(9,"\n            "),t.DNE(10,$,4,2,"ng-container",19),t.EFF(11,"\n          "),t.k0s(),t.EFF(12,"\n        "),t.k0s(),t.EFF(13,"\n      "),t.k0s()),2&e){const n=t.XpG().$implicit,i=t.XpG(2);t.R7$(2),t.Y8G("innerHTML",i.getTranslation("setting.header.",n._Theme),t.npT),t.R7$(4),t.Y8G("innerHTML",i.getTranslation("setting.subtitle.",n._Theme),t.npT),t.R7$(4),t.Y8G("ngForOf",n.ListOfSettings)}}function B(e,o){if(1&e&&(t.j41(0,"div"),t.EFF(1,"\n      "),t.DNE(2,x,14,3,"div",20),t.EFF(3,"\n    "),t.k0s()),2&e){const n=o.$implicit,i=t.XpG(2);t.R7$(2),t.Y8G("ngIf",i.hasBasicSettings(n.ListOfSettings))}}function I(e,o){if(1&e){const n=t.RV6();t.j41(0,"form",4),t.EFF(1,"\n  "),t.j41(2,"fieldset",5),t.EFF(3,"\n    "),t.j41(4,"legend"),t.EFF(5,"\n      "),t.j41(6,"div",6),t.EFF(7,"\n        "),t.nrm(8,"h5",7),t.nI1(9,"translate"),t.EFF(10,"\n        "),t.j41(11,"div",8),t.EFF(12,"\n          "),t.j41(13,"div",9),t.EFF(14,"\n            "),t.j41(15,"div",10),t.EFF(16,"\n              "),t.j41(17,"button",11),t.bIt("click",function(){t.eBV(n);const s=t.XpG();return t.Njj(s.updateSettings())}),t.k0s(),t.EFF(18,"\n            "),t.k0s(),t.EFF(19,"\n            "),t.j41(20,"div",12),t.EFF(21,"\n              "),t.j41(22,"button",13),t.bIt("click",function(){t.eBV(n);const s=t.XpG();return t.Njj(s.reinitSettings())}),t.k0s(),t.EFF(23,"\n            "),t.k0s(),t.EFF(24,"\n            "),t.j41(25,"div",14),t.EFF(26,"\n              "),t.j41(27,"input",15),t.bIt("click",function(s){t.eBV(n);const c=t.XpG();return t.Njj(c.advancedSettings(s))}),t.k0s(),t.EFF(28,"\n              "),t.nrm(29,"label",16),t.EFF(30,"\n            "),t.k0s(),t.EFF(31,"\n          "),t.k0s(),t.EFF(32,"\n        "),t.k0s(),t.EFF(33,"\n      "),t.k0s(),t.EFF(34,"\n    "),t.k0s(),t.EFF(35,"\n    "),t.nrm(36,"p",17),t.nI1(37,"translate"),t.EFF(38,"\n  "),t.k0s(),t.EFF(39,"\n  "),t.j41(40,"div",18),t.EFF(41,"\n    "),t.DNE(42,B,4,1,"div",19),t.EFF(43,"\n  "),t.k0s(),t.EFF(44,"\n"),t.k0s()}if(2&e){const n=t.XpG();t.Y8G("formGroup",n.form),t.R7$(8),t.Y8G("innerHTML",t.bMT(9,6,"setting.help.legend"),t.npT),t.R7$(9),t.Y8G("disabled",!n.form.valid),t.R7$(10),t.Y8G("checked",n.advanced),t.R7$(9),t.Y8G("innerHTML",t.bMT(37,8,"setting.help.link"),t.npT),t.R7$(6),t.Y8G("ngForOf",n.settings)}}function O(e,o){if(1&e){const n=t.RV6();t.EFF(0,"\n  "),t.j41(1,"div",26),t.EFF(2,"\n    "),t.nrm(3,"h4",27),t.EFF(4,"\n    "),t.j41(5,"button",28),t.bIt("click",function(){const s=t.eBV(n).$implicit;return t.Njj(s.dismiss("Cross click"))}),t.k0s(),t.EFF(6,"\n  "),t.k0s(),t.EFF(7,"\n  "),t.nrm(8,"div",29),t.EFF(9,"\n  "),t.j41(10,"div",30),t.EFF(11,"\n    "),t.j41(12,"button",31),t.bIt("click",function(){const s=t.eBV(n).$implicit;return t.Njj(s.dismiss("cancel"))}),t.k0s(),t.EFF(13,"\n  "),t.k0s(),t.EFF(14,"\n")}}function D(e,o){if(1&e){const n=t.RV6();t.EFF(0,"\n  "),t.j41(1,"div",26),t.EFF(2,"\n    "),t.nrm(3,"h4",32),t.EFF(4,"\n    "),t.j41(5,"button",28),t.bIt("click",function(){const s=t.eBV(n).$implicit;return t.Njj(s.dismiss("Cross click"))}),t.k0s(),t.EFF(6,"\n  "),t.k0s(),t.EFF(7,"\n  "),t.nrm(8,"div",33),t.EFF(9,"\n  "),t.j41(10,"div",30),t.EFF(11,"\n    "),t.j41(12,"button",34),t.bIt("click",function(){const s=t.eBV(n).$implicit;return t.Njj(s.dismiss("cancel"))}),t.k0s(),t.EFF(13,"\n  "),t.k0s(),t.EFF(14,"\n")}}function X(e,o){if(1&e){const n=t.RV6();t.EFF(0,"\n  "),t.j41(1,"div",26),t.EFF(2,"\n    "),t.nrm(3,"h4",35),t.EFF(4,"\n    "),t.j41(5,"button",28),t.bIt("click",function(){const s=t.eBV(n).$implicit;return t.Njj(s.dismiss("Cross click"))}),t.k0s(),t.EFF(6,"\n  "),t.k0s(),t.EFF(7,"\n  "),t.nrm(8,"div",36),t.EFF(9,"\n  "),t.j41(10,"div",30),t.EFF(11,"\n    "),t.j41(12,"button",37),t.bIt("click",function(){const s=t.eBV(n).$implicit;return t.Njj(s.dismiss("cancel"))}),t.k0s(),t.EFF(13,"\n  "),t.k0s(),t.EFF(14,"\n")}}const M=[{path:"",component:(()=>{class e{modalService;apiService;formBuilder;toastr;headerService;translate;contentRestart;contentReset;contentErase;form;settings;advanced=!1;constructor(n,i,s,c,F,u){this.modalService=n,this.apiService=i,this.formBuilder=s,this.toastr=c,this.headerService=F,this.translate=u}ngOnInit(){this.form=this.formBuilder.group({}),this.apiService.getSettings().subscribe(n=>{this.settings=n,this.settings.sort((i,s)=>i._Order-s._Order)})}reinitSettings(){this.settings.forEach(n=>{const i=[];n.ListOfSettings.forEach(s=>{"path"!==s.DataType&&(s.current_value=s.default_value),i.push(Object.assign({},s))}),n.ListOfSettings=i}),this.settings=[...this.settings],this.form.markAsTouched()}advancedSettings(n){this.advanced=!!n.currentTarget.checked}updateSettings(){this.form.invalid?this.form.markAsTouched():(Object.keys(this.form.value).forEach(n=>{!0===this.form.value[n].current?this.form.value[n].current=1:!1===this.form.value[n].current&&(this.form.value[n].current=0)}),this.apiService.putSettings(this.form.value).subscribe(()=>{this.form.markAsPristine(),this.toastr.success(this.translate.instant("api.global.succes.saved.notify")),this.apiService.getSettings().subscribe(n=>{this.settings=n,this.settings.sort((i,s)=>i._Order-s._Order)}),this.apiService.getRestartNeeded().subscribe(n=>{1===n.RestartNeeded?(this.headerService.setRestart(!0),this.open(this.contentRestart)):2===n.RestartNeeded?this.open(this.contentReset):3===n.RestartNeeded&&this.open(this.contentErase)})}))}open(n){this.modalService.open(n,{ariaLabelledBy:"modal-basic-title"}).result.then()}hasBasicSettings(n){return!!this.advanced||n.filter(i=>!1===i.Advanced).length>0}getTranslation(n,i){return this.translate.instant(n.concat(i))}static \u0275fac=function(i){return new(i||e)(t.rXU(_.Bq),t.rXU(E.G),t.rXU(r.ok),t.rXU(h.tw),t.rXU(b.d),t.rXU(l.c$))};static \u0275cmp=t.VBU({type:e,selectors:[["app-settings"]],viewQuery:function(i,s){if(1&i&&(t.GBs(d,5),t.GBs(d,5),t.GBs(d,5)),2&i){let c;t.mGM(c=t.lsd())&&(s.contentRestart=c.first),t.mGM(c=t.lsd())&&(s.contentReset=c.first),t.mGM(c=t.lsd())&&(s.contentErase=c.first)}},decls:11,vars:1,consts:[["contentRestart",""],["contentReset",""],["contentErase",""],[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"h-100"],[1,"row"],[1,"col-sm-8",3,"innerHTML"],[1,"col-sm-4"],[1,"d-flex","flex-row-reverse","align-items-center"],[1,"p-2"],["translate","setting.validate.button",1,"btn","btn-primary",3,"click","disabled"],[1,"p-2","ms-3"],["translate","setting.reinit.button",1,"btn","btn-secondary",3,"click"],[1,"switch","switch-sm"],["type","checkbox","id","switch-advanced",1,"switch",3,"click","checked"],["for","switch-advanced","translate","setting.advanced.button",1,"mb-0"],[1,"card-text",3,"innerHTML"],[1,"row","row-cols-1","row-cols-md-3","g-4","mt-2"],[4,"ngFor","ngForOf"],["class","card h-100",4,"ngIf"],[1,"card","h-100"],[1,"card-header","fw-bold",3,"innerHTML"],[1,"card-body"],[1,"card-text"],[3,"setting","advanced"],[1,"modal-header"],["id","modal-basic-title","translate","setting.reloadplugin.alert.title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["translate","setting.reloadplugin.alert.subject",1,"modal-body"],[1,"modal-footer"],["type","button","translate","setting.reloadplugin.alert.cancel",1,"btn","btn-outline-dark",3,"click"],["id","modal-basic-title","translate","setting.resetplugin.alert.title",1,"modal-title"],["translate","setting.resetplugin.alert.subject",1,"modal-body"],["type","button","translate","setting.resetplugin.alert.cancel",1,"btn","btn-outline-dark",3,"click"],["id","modal-basic-title","translate","setting.eraseplugin.alert.title",1,"modal-title"],["translate","setting.eraseplugin.alert.subject",1,"modal-body"],["type","button","translate","setting.eraseplugin.alert.cancel",1,"btn","btn-outline-dark",3,"click"]],template:function(i,s){1&i&&(t.DNE(0,I,45,10,"form",3),t.EFF(1,"\n\n"),t.DNE(2,O,15,0,"ng-template",null,0,t.C5r),t.EFF(4,"\n\n"),t.DNE(5,D,15,0,"ng-template",null,1,t.C5r),t.EFF(7,"\n\n"),t.DNE(8,X,15,0,"ng-template",null,2,t.C5r),t.EFF(10,"\n")),2&i&&t.Y8G("ngIf",s.settings)},dependencies:[m.Sq,m.bT,r.qT,r.cb,r.j4,l.Mm,y,l.D9],styles:[".btn-secondary[_ngcontent-%COMP%]{--bs-btn-color: white}"]})}return e})(),data:{title:(0,v.o6)("settings")}}];let Y=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=t.$C({type:e});static \u0275inj=t.G2t({imports:[p.iI.forChild(M),p.iI]})}return e})(),V=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=t.$C({type:e});static \u0275inj=t.G2t({imports:[Y,f.G]})}return e})()}}]);